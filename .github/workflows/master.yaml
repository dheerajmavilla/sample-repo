name: workflow for Master
on:
  push:
    branches:
      - "main"
    paths:
      - terraform/scripts/**
jobs:
  test: 
    name: test
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v3
        with:
          # We need to fetch all branches and commits so that Nx affected has a base to compare against.
          fetch-depth: 0
      - id: test_curl
        run: |
          curl \
          -H "Accept: application/vnd.github+json" \
          -H "Authorization: Bearer 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"\
          -H "X-GitHub-Api-Version: 2022-11-28" \
          https://api.github.com/repos/dheerajmavilla/sample-repo/actions/variables/TEST_VARIABLE
      - name: job name
        id: job_name
        if: failure()
        run: |
          output_job=${{ github.job }}
          echo "output_job=$output_job" >> $GITHUB_OUTPUT
